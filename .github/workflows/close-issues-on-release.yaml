name: Close issues upon a release

on:
  release:
    types: [published]
  workflow_dispatch: 
  
jobs:
  patched:
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Close issues marked as "patched" upon a release.
        uses: gcampbell-msft/fixed-pending-release@0.0.12
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          label: patched
          message: >
            :tada: This issue has now been fixed and is available in [${releaseTag}](${releaseUrl}) :tada:

            This ticket is now closed. If you have any more question, feel free to reply below. If needed,
            the ticket will be re-open for further support.

  implemented:
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Close issues marked as "implemented" upon a release.
        uses: gcampbell-msft/fixed-pending-release@0.0.12
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          label: implemented
          message: >
            This request is already existed in the app. Therefore, this ticket is now closed.

            If you have any question, feel free to reply below. If needed,
            the ticket will be re-open for further support.
